!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/core"),require("@angular/common"),require("@ngx-gallery/core"),require("@ngx-gallery/lightbox"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ngx-gallery/gallerize",["exports","@angular/core","@angular/common","@ngx-gallery/core","@ngx-gallery/lightbox","rxjs","rxjs/operators"],r):r((e["ngx-gallery"]=e["ngx-gallery"]||{},e["ngx-gallery"].gallerize={}),e.ng.core,e.ng.common,null,null,e.rxjs,e.rxjs.operators)}(this,function(e,r,n,l,t,i,s){"use strict";var o=function(){function e(e,r,t,o,l,i){this._el=e,this._gallery=r,this._lightbox=t,this._renderer=o,this._galleryCmp=i,this._galleryId="lightbox",this.selector="img",n.isPlatformBrowser(l)&&(this._mode=i?"gallery":"detector")}return e.prototype.ngOnInit=function(){this._galleryId=this.gallerize||this._galleryId;var e=this._gallery.ref(this._galleryId);switch(this._mode){case"detector":this.detectorMode(e);break;case"gallery":this.galleryMode(e)}},e.prototype.ngOnDestroy=function(){switch(this._mode){case"detector":this._detector$.complete(),this._observer$.disconnect();break;case"gallery":this._itemClick$.unsubscribe(),this._itemChange$.unsubscribe()}},e.prototype.galleryMode=function(r){var t=this;this._itemClick$=this._galleryCmp.galleryRef.itemClick.subscribe(function(e){return t._lightbox.open(e,t._galleryId)}),this._itemChange$=this._galleryCmp.galleryRef.itemsChanged.subscribe(function(e){return r.load(e.items)})},e.prototype.detectorMode=function(t){var o=this;this._detector$=new i.Subject,this._detector$.pipe(s.debounceTime(300),s.switchMap(function(){var e=o._el.nativeElement.querySelectorAll(o.selector);if(e&&e.length){var r=[];return i.from(e).pipe(s.map(function(e,r){if(o._renderer.setStyle(e,"cursor","pointer"),o._renderer.setProperty(e,"onclick",function(){return o._lightbox.open(r,o._galleryId)}),e instanceof HTMLImageElement)return{src:e.src,thumb:e.src};var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage.slice(4,-1).replace(/"/g,"");return{src:t,thumb:t}}),s.tap(function(e){return r.push(new l.ImageItem(e))}),s.finalize(function(){return t.load(r)}))}return i.EMPTY})).subscribe(),this._observer$=new MutationObserver(function(){return o._detector$.next()}),this._observer$.observe(this._el.nativeElement,{childList:!0,subtree:!0})},e.decorators=[{type:r.Directive,args:[{selector:"[gallerize]"}]}],e.ctorParameters=function(){return[{type:r.ElementRef},{type:l.Gallery},{type:t.Lightbox},{type:r.Renderer2},{type:Object,decorators:[{type:r.Inject,args:[r.PLATFORM_ID]}]},{type:l.GalleryComponent,decorators:[{type:r.Host},{type:r.Self},{type:r.Optional}]}]},e.propDecorators={gallerize:[{type:r.Input}],selector:[{type:r.Input}]},e}(),a=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[l.GalleryModule,t.LightboxModule],declarations:[o],exports:[o]}]}],e}();e.GallerizeDirective=o,e.GallerizeModule=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-gallery-gallerize.umd.min.js.map